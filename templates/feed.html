<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>è²¼æ–‡ç‰†</title>
<style>
  body{font-family:Arial,sans-serif;background:#f7f7f7;margin:24px;color:#333}
  .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
  a.link{color:#2563eb;text-decoration:none}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;margin-bottom:16px}
  .author{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  .avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;background:#eee}
  .post-img{width:100%;max-width:680px;border-radius:10px;margin-top:8px}
  .meta{font-size:13px;color:#777;margin-top:6px}
  .actions form{display:inline}
  textarea,input[type="file"]{width:100%}
  textarea{padding:10px;border:1px solid #ccc;border-radius:8px;min-height:90px;box-sizing:border-box}
  button{background:#967AA1;color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
  .nums a{color:#2563eb;text-decoration:none;margin-left:10px}
</style>
</head>
<body>
  <div class="top">
    <div><a class="link" href="/">â† è¿”å›é¦–é </a></div>
    <div>
      <a class="link" href="{{ url_for('my_likes') }}">æˆ‘æŒ‰éçš„è®š</a> |
      <a class="link" href="{{ url_for('profile') }}">å€‹äººä»‹é¢</a>
    </div>
  </div>

  <!-- ç™¼æ–‡å¡ -->
  <div class="card">
    <form method="post" enctype="multipart/form-data">
      <label>æƒ³åˆ†äº«ä»€éº¼ï¼Ÿï¼ˆå¯ä¸Šå‚³åœ–ç‰‡ï¼‰</label>
      <textarea name="content" placeholder="å¯«é»ä»€éº¼å§â€¦"></textarea>
      <div style="display:flex;gap:10px;align-items:center;margin-top:8px;flex-wrap:wrap">
        <input type="file" name="image" accept="image/*" />
        <button type="submit">ç™¼å¸ƒ</button>
      </div>
    </form>
  </div>

  <!-- è²¼æ–‡åˆ—è¡¨ -->
  {% for p in posts %}
  <div class="card">
    <div class="author">
      <img class="avatar" src="{{ p.author_avatar }}" alt="">
      <div>
        <div><a class="link" href="{{ url_for('user_public', uid=p.user_id) }}">{{ p.author_name }}</a></div>
        <div class="meta">{{ p.created_at }}</div>
      </div>
    </div>
    {% if p.content %}
      <div style="white-space:pre-wrap; line-height:1.6">{{ p.content }}</div>
    {% endif %}
    {% if p.image_url %}
      <img class="post-img" src="{{ p.image_url }}" alt="">
    {% endif %}

    <div style="margin-top:10px" class="actions">
      <form method="post" action="{{ url_for('like_toggle', pid=p.id) }}">
        <button type="submit">{{ 'æ”¶å›è®š' if p.me_liked else 'æŒ‰è®š' }}</button>
      </form>
      <a class="link" style="margin-left:8px" href="{{ url_for('post_detail', pid=p.id) }}">ç•™è¨€</a>
      <span class="nums">
        <a href="{{ url_for('post_detail', pid=p.id) }}">ğŸ‘ {{ p.like_count }}</a>
        <a href="{{ url_for('post_detail', pid=p.id) }}">ğŸ’¬ {{ p.comment_count }}</a>
      </span>
    </div>
  </div>
  {% else %}
  <p style="text-align:center;color:#666">é‚„æ²’æœ‰ä»»ä½•è²¼æ–‡</p>
  {% endfor %}
</body>
</html>
